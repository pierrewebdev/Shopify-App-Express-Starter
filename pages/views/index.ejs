<!-- App Main Dashboard Starts Here-->
<%- include('partials/app-header') %>

<!-- Tabs-->
<section>
    <div class="columns has-sections">
        <h2>Recovery Types</h2>
        <ul class="tabs">
            <li class="active"><a href="#drafts">Draft Orders</a></li>
            <li><a href="#orders">Orders</a></li>
            <li><a href="#checkouts">Abandoned Checkouts</a></li>
        </ul>
    </div>
</section>

<!--Table of Draft Orders-->
<%- include('partials/draft-order-table')  %>

<!--Button to test Order and Draft Order Request-->
<div class = "column twelve" style = "margin-bottom: 2.5rem; margin-top: 4rem;">
    <button class = "test-endpoint-btn button" onclick = "testdraftOrder()">
        Test Draft Order Sync
    </button>
</div>

<div class = "column twelve" style = "margin-bottom: 2.5rem;" onclick = "testOrder()">
    <button class = "test-endpoint-btn">
        Test Order Sync
    </button>
</div>

<div class = "column twelve" style = "margin-bottom: 2rem;" onclick = "testAbandonedCheckout()">
    <button class = "test-endpoint-btn">
        Test Abandoned Checkout Sync
    </button>
</div>

<div class = "column twelve" style = "margin-bottom: 2rem;" onclick = "getAccessScopes()">
    <button class = "test-endpoint-btn">
        Get Access Scopes
    </button>
</div>

<div class = "column twelve" style = "margin-bottom: 2rem;" id="react-btn">
</div>


<script>
    const testdraftOrder = async () => {
        const requestBody = JSON.stringify({})

        //Make POST Request to server and show success message when finished.
        //I'll use an alert for now but will eventually use a Toast notification.

        try {
            const request = await fetch("/sync-draft-orders", {
                method: "POST",
                headers: { "Content-Type": "application/json"},
                body: requestBody

            })

            const response = request
            if(!response.status == 200) return
            alert("I've sent out your draft order test")
        } catch (error) {
            console.error(error)
        }
    }

    const testOrder = async () => {
        const requestBody = JSON.stringify({})

        //Make POST Request to server and show success message when finished.
        //I'll use an alert for now but will eventually use a Toast notification.

        try {
            const request = await fetch("/test-order-req", {
                method: "POST",
                headers: { "Content-Type": "application/json"},
                body: requestBody

            })

            const response = request
            if(!response.status == 200) return
            alert("I've sent out your order test")
        } catch (error) {
            console.error(error)
        }
    }

    const testAbandonedCheckout = async () => {
        const requestBody = JSON.stringify({})

        //Make POST Request to server and show success message when finished.
        //I'll use an alert for now but will eventually use a Toast notification.

        try {
            const request = await fetch("/test-checkout-req", {
                method: "POST",
                headers: { "Content-Type": "application/json"},
                body: requestBody

            })

            const response = request
            if(!response.status == 200) return
            alert("I've sent out your abandoned cart test")
        } catch (error) {
            console.error(error)
        }
    }

    const getAccessScopes = async () => {

        //Make POST Request to server and show success message when finished.
        //I'll use an alert for now but will eventually use a Toast notification.

        try {
            const request = await fetch("/check-access-scopes")

            const response = request
            if(!response.status == 200) return
            alert("I've requested your access scopes")
        } catch (error) {
            console.error(error)
        }
    }
</script>

<!-- App Main Dashboard Ends Here-->
